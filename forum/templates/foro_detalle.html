{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>{{ foro.titulo }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f0f2f5; }
        .foro-header {
            background: linear-gradient(90deg, #0d6efd, #6610f2);
            color: white;
            padding: 20px;
            border-radius: 10px;
        }
        .comentario-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        /* ðŸ”¹ Estilo para el link del archivo adjunto */
        .link-adjunto {
            color: #0ece1e;        /* Azul vivo */
            font-weight: bold;
            text-decoration: none;
        }
        .link-adjunto:hover {
            color: #2aca0a;        /* Azul mÃ¡s oscuro */
            text-decoration: underline;
        }
    </style>
</head>
<body>
<div class="container my-5">
    <div class="foro-header shadow">
        <h2><i class="bi bi-megaphone-fill"></i> {{ foro.titulo }}</h2>
        <p class="mb-0">{{ foro.descripcion }}</p>
        <small>Publicado por {{ foro.autor.username }} | {{ foro.fecha_creacion|date:"M d, Y H:i" }}</small>

        {% if foro.archivo %}
            <p class="mt-2">
                <i class="bi bi-paperclip"></i>
                <a href="{{ foro.archivo.url }}" class="link-adjunto" target="_blank">Ver archivo adjunto</a>
            </p>
        {% endif %}
    </div>

    <div class="mt-4">
        <h4><i class="bi bi-chat-dots"></i> Comentarios</h4>
        {% for comentario in comentarios %}
        <div class="comentario-card">
            <p>{{ comentario.texto }}</p>
            <small class="text-muted">Por {{ comentario.autor.username }} - {{ comentario.fecha|date:"M d, Y H:i" }}</small>
        </div>
        {% empty %}
        <p class="text-muted">No hay comentarios aÃºn. Â¡SÃ© el primero en comentar!</p>
        {% endfor %}

        <!-- Formulario comentario -->
        <form method="POST" class="mt-3" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="mb-3">
                <textarea name="texto" rows="3" class="form-control" placeholder="Escribe tu comentario aquÃ­..." required></textarea>
            </div>
            <div class="mb-3">
                <label class="form-label">Adjuntar archivo (opcional)</label>
                <input type="file" name="archivo" class="form-control">
            </div>
            <button type="submit" class="btn btn-primary"><i class="bi bi-send"></i> Comentar</button>
            <a href="{% url 'foros' %}" class="btn btn-secondary"><i class="bi bi-arrow-left"></i> Regresar</a>
        </form>
    </div>
</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
