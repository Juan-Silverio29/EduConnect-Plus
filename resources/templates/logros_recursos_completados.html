{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Logros - Recursos Completados</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"/>
  <style>
    body { background-color: #f0f4ff; }
    .navbar-custom { background-color: #004080; }
    .navbar-custom .navbar-brand, .navbar-custom .nav-link { color: white; }
    .container { margin-top: 40px; }
    .card { border: none; border-radius: 10px; box-shadow: 0 3px 6px rgba(0,0,0,.2); }
    .card-header { background-color: #004080; color: #fff; font-weight: 700; }
    .btn-back { margin-top: 20px; background-color: #004080; color: #fff; border: none; }
    .btn-back:hover { background-color: #0066cc; }
    .contador {
      background-color: #0066cc; color: #fff; padding: 15px; border-radius: 10px;
      margin-bottom: 25px; font-size: 18px; font-weight: 700; text-align: center;
      box-shadow: 0 2px 5px rgba(0,0,0,.2);
    }
    .progress { height: 25px; border-radius: 15px; margin-bottom: 25px; }
    .progress-bar { font-weight: 700; font-size: 14px; }
  </style>
</head>
<body>
  <!-- Barra superior -->
  <nav class="navbar navbar-custom">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">EduConnect+</a>
    </div>
  </nav>

  <div class="container">
    <h2 class="text-center mb-4">üèÜ Recursos Completados</h2>

    <!-- Contador de logros -->
    <div class="contador">
      üéâ Has completado <strong>{{ recursos|length }}</strong> de <strong>{{ total_recursos }}</strong> recurso(s)
    </div>

    <!-- Barra de progreso (sin Django dentro de style) -->
    <div class="progress">
      <div
        id="progressBar"
        class="progress-bar {{ progreso_class }}"
        role="progressbar"
        aria-valuemin="0"
        aria-valuemax="100"
        aria-valuenow="{{ progreso }}"
        data-progress="{{ progreso }}">
        {{ progreso }}%
      </div>
    </div>

    {% if recursos %}
      <div class="row">
        {% for recurso in recursos %}
        <div class="col-md-4 mb-3">
          <div class="card">
            <div class="card-header">{{ recurso.titulo }}</div>
            <div class="card-body">
              <p>{{ recurso.descripcion }}</p>
              <p><strong>Fecha completado:</strong> {{ recurso.fecha_completado }}</p>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="alert alert-info text-center">
        A√∫n no has completado recursos. üöÄ
      </div>
    {% endif %}

    <div class="text-center">
      <a href="{% url 'dashboard_user' %}" class="btn btn-back">‚¨Ö Regresar al Dashboard</a>
    </div>
  </div>

  <!-- JS peque√±ito para fijar el width sin l√≠os con el linter -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var el = document.getElementById('progressBar');
      if (!el) return;
      var pct = Number(el.getAttribute('data-progress')) || 0;
      el.style.width = pct + '%';
    });
  </script>
</body>
</html>
